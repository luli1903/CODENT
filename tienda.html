<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Tienda | CODENT</title>

  <link rel="icon" href="/img/favicon.ico"/>
  <link rel="stylesheet" href="/css/style.css"/>

  <style>
    :root{
      --ink:#0f172a; --muted:#475569; --line:#e2e8f0;
      --bg:#fff; --card:#f8fafc; --accent:#0ea5e9;
      --r-lg:14px; --shadow:0 8px 22px rgba(0,0,0,.06);
    }
    .container{ width:min(1200px,92%); margin-inline:auto }

    .shop-header{ padding:28px 0 10px; border-bottom:1px solid var(--line); background:#fff }
    .shop-header h1{ font-size:1.6rem; margin:0; color:var(--ink); font-weight:800 }
    .shop-header .subtitle{ color:var(--muted); margin:.25rem 0 0 }

    /* subnav */
    .shop-subnav{ position:sticky; top:56px; z-index:9; background:#fff; border-bottom:1px solid var(--line) }
    .subnav-row{ display:flex; gap:.5rem; align-items:center; justify-content:flex-end; padding:.6rem 0 }
    .badge{ display:inline-block; min-width:1.25rem; text-align:center; padding:.1rem .35rem; border-radius:999px; background:#0ea5e9; color:#fff; font-size:.8rem; margin-left:.35rem }

    /* filtros (debajo del subnav) */
    .shop-filters{ position:sticky; top:96px; background:#fff; z-index:8; border-bottom:1px solid var(--line) }
    .chip-row{ display:flex; gap:.5rem; padding:.75rem 0; flex-wrap:wrap }
    .chip{
      border:1px solid var(--line); background:#fff; padding:.4rem .8rem;
      border-radius:999px; font-size:.92rem; color:var(--ink);
      cursor:pointer; user-select:none; transition:all .15s ease;
    }
    .chip:hover{ box-shadow:var(--shadow) }
    .chip.is-active{ border-color:var(--accent); outline:2px solid color-mix(in srgb, var(--accent) 30%, transparent); }

    .shop-main{ padding:1.2rem 0 3rem }
    .grid{
      display:grid; gap:1rem;
      grid-template-columns: repeat( auto-fill, minmax(220px, 1fr) );
    }
    .card{
      background:#fff; border:1px solid var(--line); border-radius:16px; overflow:hidden; box-shadow:var(--shadow);
      display:flex; flex-direction:column;
    }
    .card .thumb{ aspect-ratio:4/3; background:var(--card); display:block; object-fit:cover; width:100% }
    .card .body{ padding:.8rem .9rem; display:grid; gap:.35rem }
    .card .name{ font-weight:700; color:var(--ink); font-size:1rem; line-height:1.25 }
    .card .desc{ color:var(--muted); font-size:.9rem; min-height:2.6em }
    .card .meta{ display:flex; align-items:center; justify-content:space-between; margin-top:.3rem }
    .card .price{ font-weight:800; }
    .card .cta{ display:flex; gap:.5rem; margin-top:.6rem }
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:.4rem;
      border:1px solid var(--line); border-radius:12px; padding:.5rem .8rem; background:#fff; cursor:pointer;
    }
    .btn.primary{ background:var(--accent); color:#fff; border-color:var(--accent) }
    .btn:disabled{ opacity:.6; cursor:not-allowed }

    .empty{ text-align:center; color:var(--muted); display:grid; place-items:center; gap:.6rem; padding:2rem 0 }
    .empty img{ width:90px; opacity:.8 }

    /* fuerza ocultamiento real cuando hidden est√° presente */
    .empty[hidden]{ display:none !important; }
  </style>
</head>
<body id="shop">
  <header class="shop-header">
    <div class="container">
      <h1>Productos</h1>
      <p class="subtitle">Eleg√≠ una categor√≠a o explor√° todo.</p>
    </div>
  </header>

  <!-- ‚úÖ ESTO VA FUERA DEL <style> -->
  <section class="shop-subnav">
    <div class="container subnav-row">
      <a href="/index.html" class="btn" aria-label="Volver al inicio">‚Ü©Ô∏è Inicio</a>
      <a href="/carrito.html" class="btn" aria-label="Abrir carrito">
        üõí Ver carrito <span id="cartBadge" class="badge">0</span>
      </a>
    </div>
  </section>

  <section class="shop-filters">
    <div class="container">
      <nav id="catNav" aria-label="Categor√≠as" class="chip-row">
        <!-- chips se inyectan desde shop.js -->
      </nav>
    </div>
  </section>

  <main class="shop-main">
    <div class="container">
      <div id="productGrid" class="grid"></div>

      <!-- estados -->
      <!-- estados -->
<div id="emptyState" class="empty" hidden>
  <svg width="88" height="88" viewBox="0 0 24 24" aria-hidden="true">
    <path fill="#94a3b8" d="M21 8v8.5a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 3 16.5V8l9-5z"/>
    <path fill="#cbd5e1" d="M12 3v18h6.5A1.5 1.5 0 0 0 20 19.5V8z"/>
    <path fill="#e2e8f0" d="M4 8h16l-8 4z"/>
  </svg>
  <p>No encontramos productos en esta categor√≠a.</p>
</div>


      <div id="errorState" class="empty" hidden>
        <!-- <img src="/img/error.svg" alt=""> -->
        <p>Ocurri√≥ un error al cargar la tienda. Reintent√° m√°s tarde.</p>
      </div>
    </div>
  </main>

  <!-- scripts -->
  <script type="module" src="/js/cart.js"></script>
  <script type="module" src="/js/shop.js"></script>
  <script type="module" src="/js/cart-merge.js"></script>
  <script type="module" src="/js/auth-modal.js"></script>

  <!-- actualiza el badge al entrar -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      window.Cart?.updateCartBadge?.();
    });
  </script>
</body>
</html>
